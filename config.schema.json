{
  "pluginAlias": "TahomaGate",
  "pluginType": "platform",
  "schema": {
    "type": "object",
    "properties": {      
      "user": { "type": "string", "title": "Somfy Email" },
      "password": { "type": "string", "title": "Somfy Password" },
      "pollingInterval": {
        "type": "integer",
        "title": "Polling interval (ms)",
        "default": 30000,
        "description": "Fréquence de vérification de l’état du portail (en millisecondes)."
      },
      "enableHistory": {
      "type": "boolean",
      "title": "Activer l'historique des actions",
      "default": false
    },
    "enableWebUI": {
      "type": "boolean",
      "title": "Activer l'interface Web locale",
      "default": false
    },
    "webPort": {
      "type": "integer",
      "title": "Port du serveur Web",
      "default": 8999
    },
    "devices": {
      "type": "array",
      "title": "Liste des portails",
      "items": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "title": "Nom du portail" },
          "deviceURL": { "type": "string", "title": "DeviceURL du portail" }
        },
        "required": ["name", "deviceURL"]
      }
    }
  }
  "layout": [
    {
      "type": "fieldset",
      "title": "Paramètres principaux",
      "expandable": true,
      "items": [
        "name",
        "user",
        "password",
        {
          "type": "fieldset",
          "title": "Liste des portails",
          "description": "Ajoutez un ou plusieurs portails à contrôler via TaHoma.",
          "items": [
            {
              "type": "array",
              "items": {
                "type": "section",
                "title": "{{name}}",
                "expandable": true,
                "items": [
                  "devices[].name",
                  "devices[].deviceURL"
                ]
              },
              "addButtonText": "Ajouter un portail"
            }
          ]
        },
        "pollingInterval"
      ]
    },
    {
      "type": "fieldset",
      "title": "Actions manuelles",
      "items": [
        {
          "type": "button",
          "title": "Forcer la mise à jour maintenant",
          "action": "forceUpdate"
        }
      ]
    },
    {
      "type": "fieldset",
      "title": "Informations",
      "items": [
        {
          "type": "paragraph",
          "content": "Ce plugin Homebridge vous permet de contrôler un portail Somfy via la box TaHoma V2. Le plugin interroge l'état toutes les X secondes et peut être mis à jour manuellement avec le bouton ci-dessus."
        }
      ]
    }
  ]
}
