{
  "pluginAlias": "TahomaGate",
  "pluginType": "platform",
  "schema": {
    "type": "object",
    "properties": {
      "user": {
        "type": "string",
        "title": "Somfy Email"
      },
      "password": {
        "type": "string",
        "title": "Somfy Password"
      },
      "pollingInterval": {
        "type": "integer",
        "title": "Intervalle de mise à jour (ms)",
        "default": 30000
      },
      "enableHistory": {
        "type": "boolean",
        "title": "Activer l'historique des actions",
        "default": false
      },
      "enableWebUI": {
        "type": "boolean",
        "title": "Activer l'interface Web locale",
        "default": false
      },
      "webPort": {
        "type": "integer",
        "title": "Port du serveur Web",
        "default": 8999
      },
      "devices": {
        "type": "array",
        "title": "Portails",
        "description": "Ajoutez un ou plusieurs portails à contrôler via TaHoma.",
        "items": {
          "type": "object",
          "title": "Portail",
          "properties": {
            "name": {
              "type": "string",
              "title": "Nom du portail"
            },
            "deviceURL": {
              "type": "string",
              "title": "Device URL du portail"
            }
          },
          "required": ["name", "deviceURL"]
        },
        "default": [],
        "widget": {
          "addButtonLabel": "Ajouter un portail"
        }
      }
    },
    "required": ["user", "password", "devices"]
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "Paramètres de connexion",
      "expandable": true,
      "items": [
        "user",
        "password"
      ]
    },
    {
      "type": "fieldset",
      "title": "Options générales",
      "expandable": true,
      "items": [
        "pollingInterval",
        "enableHistory",
        "enableWebUI",
        "webPort"
      ]
    },
    {
      "type": "fieldset",
      "title": "Liste des portails",
      "description": "Ajoutez un ou plusieurs portails à contrôler via TaHoma.",
      "items": [
        {
          "type": "array",
          "field": "devices",
          "addButtonText": "Ajouter un portail",
          "items": {
            "type": "section",
            "title": "{{name}}",
            "expandable": true,
            "items": [
              "devices[].name",
              "devices[].deviceURL"
            ]
          }
        }
      ]
    }
  ]
}
